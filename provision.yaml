#!/usr/bin/env ansible-playbook

- name: provision

  hosts:
    - fed143

  vars:
    ansible_user: ansible

  roles:
  # common roles
  - packages
  - users-and-groups
  - baseline
  - ssh-keys-and-config
  - firewall
  - role: dnsmasq
    when: _wants_dnsmasq|bool == true
  - role: letsencrypt
    when: "'letsencrypt' in group_names"
  - role: httpd
    when: "'httpd' in group_names"
  - role: postgres
    when: "'postgres' in group_names"
  - role: gitea
    when: "'gitea' in group_names"

