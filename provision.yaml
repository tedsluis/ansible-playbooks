#!/usr/bin/env ansible-playbook

- name: provision

  hosts:
    - fed143,fed149

  vars:
    ansible_user: ansible

  roles:
  - packages
  - users-and-groups
  - baseline
  - ssh-keys-and-config
  - chrony
  - firewall
  - role: nfsserver
    when: "'nfsserver' in group_names"
  - role: nfsclient
    when: "'nfsclient' in group_names"
  - role: dnsmasq
    when: _wants_dnsmasq|bool == true
  - role: pihole
    when: "'pihole' in group_names"
  - role: letsencrypt
    when: "'letsencrypt' in group_names"
  - role: httpd
    when: "'httpd' in group_names"
  - role: postgres
    when: "'postgres' in group_names"
  - role: gitea
    when: "'gitea' in group_names"

